import{_ as U,e as I,i as T,x as j,j as F,r as W,o as s,s as d,m as y,l as D,F as N,n as t,y as E,t as b,v as h,p as C,z as V,A as c,B as H}from"./index-6b451810.js";/* empty css              *//* empty css              */import{G as B}from"./index-de2b558d.js";import{m as Q}from"./api-c953154a.js";import"./preload-helper-41c905a7.js";const z={setup(){let f=-1,l=window.location.href;if(l.split("/").length>1){let i=l.split("/");i.length>0&&!isNaN(parseFloat(i[i.length-1]))&&(f=i[i.length-1])}const g={nodes:[],edges:[]},e=I(!1),k=I({}),x=I({}),A=I({}),w=[{title:"名称",width:"30px",key:"name",customSlot:"name"},{title:"值",width:"120px",key:"value"}],v=window.innerWidth*.8;let S=window.outerWidth*.5-window.outerWidth*.5*.15;const a={a:"https://gw.alipayobjects.com/mdn/rms_8fd2eb/afts/img/A*0HC-SawWYUoAAAAAAAAAAABkARQnAQ",b:"https://gw.alipayobjects.com/mdn/rms_8fd2eb/afts/img/A*sxK0RJ1UhNkAAAAAAAAAAABkARQnAQ"};return B.registerNode("card-node",{drawShape:function(o,r){const _=o.customStyle.color,u=2,n=r.addShape("rect",{attrs:{x:-100,y:0,width:200,height:60,stroke:_,radius:u},name:"main-box",draggable:!0});return r.addShape("rect",{attrs:{x:0-100,y:0,width:200,height:20,fill:_,radius:[u,u,0,0]},name:"title-box",draggable:!0}),r.addShape("image",{attrs:{x:-96,y:2,height:16,width:16,cursor:"pointer",img:a[o.nodeType||"app"]},name:"node-icon"}),r.addShape("text",{attrs:{textBaseline:"top",y:2,x:-76,lineHeight:20,text:o.title,fill:"#fff"},name:"title"}),o.panels.forEach((m,p)=>{r.addShape("text",{attrs:{textBaseline:"top",y:25,x:24+p*60-100,lineHeight:20,text:m.title,fill:"rgba(0,0,0, 0.4)"},name:`index-title-${p}`}),r.addShape("text",{attrs:{textBaseline:"top",y:42,x:24+p*60-100,lineHeight:20,text:m.value,fill:"#595959"},name:`index-value-${p}`})}),n}},"single-node"),T(()=>{(async()=>{const o=await Q(f);A.value=o.data,g.edges=o.data.edges,g.combos=o.data.combos;let r=0,_=0;for(let n=0;n<o.data.nodes.length;n++)o.data.nodes[n].x=S+o.data.nodes[n].x*300,o.data.nodes[n].y=o.data.nodes[n].y*150+40,r=Math.max(r,Math.abs(o.data.nodes[n].x)),_=Math.max(_,Math.abs(o.data.nodes[n].y)),o.data.nodes[n].nodeType="a",(o.data.nodes[n].id==="#start"||o.data.nodes[n].id==="#end")&&(o.data.nodes[n].style.width=200,o.data.nodes[n].style.height=50,o.data.nodes[n].style.fill="rgba(0,204,0,0.5)",o.data.nodes[n].style.radius=[2,2,0,0]);g.nodes=o.data.nodes;const u=new B.Graph({container:"engine_pic",width:v,height:_+100,fitCenter:!1,groupType:"combo",modes:{default:["click-select","activate-relations"]},defaultEdge:{type:"line",style:{lineWidth:1,stroke:"#9900ff",endArrow:{path:"M 0,0 L 10,3 L 10,-3 Z",fill:"#9900ff",strokeOpacity:.8,fillOpacity:.8}}},defaultNode:{type:"card-node"},defaultCombo:{padding:30,type:"rect",labelCfg:{position:"top"},style:{stroke:"grey",lineDash:10}}});u.on("node:click",n=>{const m=n.item;let p=m.getModel().componentInfo,M=m.getModel().id;M==="#start"||M==="#end"||(e.value=!e.value,k.value=p,x.value=m.getModel().customData)}),u.on("combo:click",n=>{const m=n.item;let p=m.getModel().componentInfo;e.value=!e.value,k.value=p,x.value=m.getModel().customData}),u.data(g),u.render()})()}),{componentInfoVisible:e,componentInfo:k,customData:x,columns2:w,info:A}}},G=t("div",{id:"engine_pic"},null,-1),L=t("h3",{style:{"padding-left":"20px"}},"基本信息",-1),O={class:"layui-form-item line-item"},R=t("label",{class:"layui-form-label line-label"},"组件名称",-1),J={class:"layui-input-block line-block"},K={class:"layui-form-item"},P=t("label",{class:"layui-form-label line-label"},"组件描述",-1),Y={class:"layui-input-block line-block"},Z={class:"layui-form-item"},q=t("label",{class:"layui-form-label line-label"},"组件类型",-1),X={class:"layui-input-block line-block"},$={key:0,class:"layui-form-item"},tt=t("label",{class:"layui-form-label line-label"},"属性列表",-1),et={class:"layui-input-block line-block"},ot=t("i",{class:"layui-icon layui-icon-about",style:{color:"#1E9FFF"}},null,-1),lt=[ot],nt={key:1,class:"layui-form-item"},at=t("label",{class:"layui-form-label line-label"},"扩展属性",-1),it={class:"layui-input-block line-block"},st={key:2,style:{"padding-left":"20px"}},dt={key:3,class:"layui-form-item"},ct=t("label",{class:"layui-form-label line-label"},"脚本名称",-1),rt={class:"layui-input-block line-block"},mt={key:4,class:"layui-form-item"},ut={class:"layui-input-block line-block"},pt={key:5,class:"layui-form-item"},ft=t("label",{class:"layui-form-label line-label"},"回滚脚本",-1),_t={class:"layui-input-block line-block"},yt={key:6,class:"layui-form-item"},bt={class:"layui-input-block line-block"},ht=t("h3",{style:{"padding-left":"20px"}},"运行信息",-1),gt={key:7,class:"layui-form-item"},vt=t("label",{class:"layui-form-label line-label"},"统计开始",-1),kt={class:"layui-input-block line-block"},xt={key:8,class:"layui-form-item"},At=t("label",{class:"layui-form-label line-label"},"统计信息",-1),It={class:"layui-input-block line-block excute-block"},wt={key:0,class:"excute-text"},St=["textContent"],Dt=["textContent"],Vt=t("br",null,null,-1);function Mt(f,l,g,e,k,x){const A=j,w=F,v=W("highlightjs"),S=E;return s(),d(N,null,[G,y(S,{type:"drawer",modelValue:e.componentInfoVisible,"onUpdate:modelValue":l[8]||(l[8]=a=>e.componentInfoVisible=a),title:"组件信息",area:"40%"},{default:D(()=>[L,t("div",O,[R,t("div",J,[b(t("input",{type:"text",name:"title","onUpdate:modelValue":l[0]||(l[0]=a=>e.componentInfo.name=a),autocomplete:"off",readonly:"",class:"layui-input",disabled:""},null,512),[[h,e.componentInfo.name]])])]),t("div",K,[P,t("div",Y,[b(t("input",{type:"text",name:"title","onUpdate:modelValue":l[1]||(l[1]=a=>e.componentInfo.describe=a),autocomplete:"off",class:"layui-input",disabled:""},null,512),[[h,e.componentInfo.describe]])])]),t("div",Z,[q,t("div",X,[b(t("input",{type:"text",name:"title","onUpdate:modelValue":l[2]||(l[2]=a=>e.componentInfo.typeDesc=a),autocomplete:"off",class:"layui-input",disabled:""},null,512),[[h,e.componentInfo.typeDesc]])])]),e.componentInfo.attributes.length>0?(s(),d("div",$,[tt,t("div",et,[y(w,{columns:e.columns2,"data-source":e.componentInfo.attributes,size:f.md,skin:"line",even:"true"},{name:D(({data:a})=>[C(V(a.name)+" ",1),y(A,{visible:!1,trigger:"hover",content:a.remark,position:"right"},{default:D(()=>[t("div",{onMouseover:l[3]||(l[3]=i=>f.visible=!0),onMouseleave:l[4]||(l[4]=i=>f.visible=!1)},lt,32)]),_:2},1032,["content"])]),_:1},8,["columns","data-source","size"])])])):c("",!0),e.componentInfo.extensionAttributes?(s(),d("div",nt,[at,t("div",it,[t("div",null,[y(v,{language:"shell",code:e.componentInfo.extensionAttributes},null,8,["code"])])])])):c("",!0),e.componentInfo.script!=null?(s(),d("h3",st,"脚本信息")):c("",!0),e.componentInfo.script!=null?(s(),d("div",dt,[ct,t("div",rt,[b(t("input",{type:"text",name:"title","onUpdate:modelValue":l[5]||(l[5]=a=>e.componentInfo.scriptName=a),autocomplete:"off",class:"layui-input",disabled:""},null,512),[[h,e.componentInfo.scriptName]])])])):c("",!0),e.componentInfo.script!=null?(s(),d("div",mt,[t("div",ut,[t("div",null,[y(v,{language:e.componentInfo.scriptType,code:e.componentInfo.script},null,8,["language","code"])])])])):c("",!0),e.componentInfo.rollbackScript!=null?(s(),d("div",pt,[ft,t("div",_t,[b(t("input",{type:"text",name:"title","onUpdate:modelValue":l[6]||(l[6]=a=>e.componentInfo.rollbackScriptName=a),class:"layui-input",disabled:""},null,512),[[h,e.componentInfo.rollbackScriptName]])])])):c("",!0),e.componentInfo.rollbackScript!=null?(s(),d("div",yt,[t("div",bt,[t("div",null,[t("div",null,[y(v,{language:e.componentInfo.rollbackScriptType,code:e.componentInfo.rollbackScript},null,8,["language","code"])])])])])):c("",!0),ht,e.customData.started!=null?(s(),d("div",gt,[vt,t("div",kt,[b(t("input",{type:"text",name:"title","onUpdate:modelValue":l[7]||(l[7]=a=>e.customData.started=a),autocomplete:"off",class:"layui-input",disabled:""},null,512),[[h,e.customData.started]])])])):c("",!0),e.customData&&e.customData.flag!=null?(s(),d("div",xt,[At,t("div",It,[(s(!0),d(N,null,H(e.customData,(a,i)=>(s(),d("div",null,[i!=="ex"&&i!=="started"&&i!=="flag"?(s(),d("span",wt,[t("label",{textContent:V(i)},null,8,St),C("："),t("label",{textContent:V(a)},null,8,Dt),Vt])):c("",!0)]))),256))])])):c("",!0)]),_:1},8,["modelValue"])],64)}const Ft=U(z,[["render",Mt]]);export{Ft as default};
