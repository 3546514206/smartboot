import{_ as B,e as D,i as j,E as U,x as F,j as E,r as W,o as i,s,n as t,p as y,z as u,A as c,m as _,l as V,F as N,y as z,t as k,v as x,B as H}from"./index-6b451810.js";/* empty css              *//* empty css              */import{G as T}from"./index-de2b558d.js";import{t as Q}from"./api-c953154a.js";import"./preload-helper-41c905a7.js";const G={setup(){let b=-1,o=window.location.href;if(o.split("/").length>1){let d=o.split("/");d.length>0&&!isNaN(parseFloat(d[d.length-1]))&&(b=d[d.length-1])}const g={nodes:[],edges:[]},e=D(!1),A=D({}),I=D({}),w=D({}),S=[{title:"名称",width:"30px",key:"name",customSlot:"name"},{title:"值",width:"120px",key:"value"}],h=window.innerWidth*.8;let M=window.outerWidth*.5-window.outerWidth*.5*.15;const a={a:"https://gw.alipayobjects.com/mdn/rms_8fd2eb/afts/img/A*0HC-SawWYUoAAAAAAAAAAABkARQnAQ",b:"https://gw.alipayobjects.com/mdn/rms_8fd2eb/afts/img/A*sxK0RJ1UhNkAAAAAAAAAAABkARQnAQ"};return T.registerNode("card-node",{drawShape:function(l,r){const v=l.customStyle.color,f=2,n=r.addShape("rect",{attrs:{x:-100,y:0,width:200,height:60,stroke:v,radius:f},name:"main-box",draggable:!0});return r.addShape("rect",{attrs:{x:0-100,y:0,width:200,height:20,fill:v,radius:[f,f,0,0]},name:"title-box",draggable:!0}),r.addShape("image",{attrs:{x:-96,y:2,height:16,width:16,cursor:"pointer",img:a[l.nodeType||"app"]},name:"node-icon"}),r.addShape("text",{attrs:{textBaseline:"top",y:2,x:-76,lineHeight:20,text:l.title,fill:"#fff"},name:"title"}),l.panels.forEach((m,p)=>{r.addShape("text",{attrs:{textBaseline:"top",y:25,x:24+p*60-100,lineHeight:20,text:m.title,fill:"rgba(0,0,0, 0.4)"},name:`index-title-${p}`}),r.addShape("text",{attrs:{textBaseline:"top",y:42,x:24+p*60-100,lineHeight:20,text:m.value,fill:"#595959"},name:`index-value-${p}`})}),n}},"single-node"),j(()=>{(async()=>{const l=await Q(b);w.value=l.data,g.edges=l.data.edges,g.combos=l.data.combos;let r=0,v=0;for(let n=0;n<l.data.nodes.length;n++)l.data.nodes[n].x=M+l.data.nodes[n].x*300,l.data.nodes[n].y=l.data.nodes[n].y*150+90,v=Math.max(v,Math.abs(l.data.nodes[n].x)),r=Math.max(r,Math.abs(l.data.nodes[n].y)),l.data.nodes[n].nodeType="a",(l.data.nodes[n].id==="#start"||l.data.nodes[n].id==="#end")&&(l.data.nodes[n].style.width=200,l.data.nodes[n].style.height=50,l.data.nodes[n].style.fill="rgba(0,204,0,0.5)",l.data.nodes[n].style.radius=[2,2,0,0]);g.nodes=l.data.nodes;const f=new T.Graph({container:"engine_pic",width:h,height:r+100,fitCenter:!1,groupByTypes:!0,groupType:"combo",modes:{default:["click-select","activate-relations"]},defaultEdge:{type:"line",style:{lineWidth:1,stroke:"#9900ff",endArrow:{path:"M 0,0 L 10,3 L 10,-3 Z",fill:"#9900ff",strokeOpacity:.8,fillOpacity:.8}}},defaultNode:{type:"card-node"},defaultCombo:{padding:30,type:"rect",labelCfg:{position:"top"},style:{stroke:"grey",lineDash:10}}});f.on("node:click",n=>{const m=n.item;let p=m.getModel().componentInfo,C=m.getModel().id;C==="#start"||C==="#end"||(e.value=!e.value,A.value=p,I.value=m.getModel().customData)}),f.on("combo:click",n=>{const m=n.item;let p=m.getModel().componentInfo;e.value=!e.value,A.value=p,I.value=m.getModel().customData}),f.data(g),f.render()})()}),{componentInfoVisible:e,componentInfo:A,customData:I,columns2:S,info:w,copy(d){navigator.clipboard.writeText(d).then(()=>{U.notifiy({size:[100,10],title:"Tip",content:"successfully copied",icon:1})})}}}},L={id:"info-bar",style:{height:"43px","background-color":"white",position:"absolute",width:"80%"}},O={key:0},R=t("br",null,null,-1),q={key:1},J=t("div",{id:"engine_pic"},null,-1),K=t("h3",{style:{"padding-left":"20px"}},"基本信息",-1),P={class:"layui-form-item line-item"},Y=t("label",{class:"layui-form-label line-label"},"组件名称",-1),Z={class:"layui-input-block line-block"},X={class:"layui-form-item"},$=t("label",{class:"layui-form-label line-label"},"组件描述",-1),ee={class:"layui-input-block line-block"},te={class:"layui-form-item"},oe=t("label",{class:"layui-form-label line-label"},"组件类型",-1),le={class:"layui-input-block line-block"},ne={key:0,class:"layui-form-item"},ae=t("label",{class:"layui-form-label line-label"},"属性列表",-1),ie={class:"layui-input-block line-block"},se=t("i",{class:"layui-icon layui-icon-about",style:{color:"#1E9FFF"}},null,-1),de=[se],ce={key:1,class:"layui-form-item"},re=t("label",{class:"layui-form-label line-label"},"扩展属性",-1),me={class:"layui-input-block line-block"},ue={key:2,style:{"padding-left":"20px"}},fe={key:3,class:"layui-form-item"},pe=t("label",{class:"layui-form-label line-label"},"脚本名称",-1),ye={class:"layui-input-block line-block"},_e={key:4,class:"layui-form-item"},be={class:"layui-input-block line-block"},he={key:5,class:"layui-form-item"},ge=t("label",{class:"layui-form-label line-label"},"回滚脚本",-1),ve={class:"layui-input-block line-block"},ke={key:6,class:"layui-form-item"},xe={class:"layui-input-block line-block"},Ae={key:7,style:{"padding-left":"20px"}},Ie={key:8,class:"layui-form-item"},we=t("label",{class:"layui-form-label line-label"},"错误信息",-1),De={class:"layui-input-block line-block"},Se={key:9,class:"layui-form-item"},Me=t("label",{class:"layui-form-label line-label"},"其他信息",-1),Ve={class:"layui-input-block line-block excute-block"},Ce={key:0,class:"excute-text"},Ne=["textContent"],Te=["textContent"],Be=t("br",null,null,-1);function je(b,o,g,e,A,I){const w=F,S=E,h=W("highlightjs"),M=z;return i(),s(N,null,[t("div",null,[t("div",L,[y("           引擎名称: "+u(e.info.name)+"-"+u(e.info.process)+"     主机地址: "+u(e.info.host)+"-"+u(e.info.address)+"           ",1),e.info&&e.info.request?(i(),s("span",O,[y("请求入参: "),t("a",{href:"javascript:void(0);",onClick:o[0]||(o[0]=a=>e.copy(e.info.request)),style:{color:"blue"}},"复制")])):c("",!0),y("   "),R,y("           链路ID: "+u(e.info.traceId)+"     采样时间: "+u(e.info.traceTime)+"    ",1),e.info&&e.info.result?(i(),s("span",q,[y("请求出参: "),t("a",{href:"javascript:void(0);",onClick:o[1]||(o[1]=a=>e.copy(e.info.result)),style:{color:"blue"}},"复制")])):c("",!0)]),J]),_(M,{type:"drawer",modelValue:e.componentInfoVisible,"onUpdate:modelValue":o[9]||(o[9]=a=>e.componentInfoVisible=a),title:"组件信息",area:"40%"},{default:V(()=>[K,t("div",P,[Y,t("div",Z,[k(t("input",{type:"text",name:"title","onUpdate:modelValue":o[2]||(o[2]=a=>e.componentInfo.name=a),autocomplete:"off",readonly:"",class:"layui-input",disabled:""},null,512),[[x,e.componentInfo.name]])])]),t("div",X,[$,t("div",ee,[k(t("input",{type:"text",name:"title","onUpdate:modelValue":o[3]||(o[3]=a=>e.componentInfo.describe=a),autocomplete:"off",class:"layui-input",disabled:""},null,512),[[x,e.componentInfo.describe]])])]),t("div",te,[oe,t("div",le,[k(t("input",{type:"text",name:"title","onUpdate:modelValue":o[4]||(o[4]=a=>e.componentInfo.typeDesc=a),autocomplete:"off",class:"layui-input",disabled:""},null,512),[[x,e.componentInfo.typeDesc]])])]),e.componentInfo.attributes.length>0?(i(),s("div",ne,[ae,t("div",ie,[_(S,{columns:e.columns2,"data-source":e.componentInfo.attributes,size:b.md,skin:"line",even:"true"},{name:V(({data:a})=>[y(u(a.name)+" ",1),_(w,{visible:!1,trigger:"hover",content:a.remark,position:"right"},{default:V(()=>[t("div",{onMouseover:o[5]||(o[5]=d=>b.visible=!0),onMouseleave:o[6]||(o[6]=d=>b.visible=!1)},de,32)]),_:2},1032,["content"])]),_:1},8,["columns","data-source","size"])])])):c("",!0),e.componentInfo.extensionAttributes?(i(),s("div",ce,[re,t("div",me,[t("div",null,[_(h,{language:"shell",code:e.componentInfo.extensionAttributes},null,8,["code"])])])])):c("",!0),e.componentInfo.script!=null?(i(),s("h3",ue,"脚本信息")):c("",!0),e.componentInfo.script!=null?(i(),s("div",fe,[pe,t("div",ye,[k(t("input",{type:"text",name:"title","onUpdate:modelValue":o[7]||(o[7]=a=>e.componentInfo.scriptName=a),autocomplete:"off",class:"layui-input",disabled:""},null,512),[[x,e.componentInfo.scriptName]])])])):c("",!0),e.componentInfo.script!=null?(i(),s("div",_e,[t("div",be,[t("div",null,[_(h,{language:e.componentInfo.scriptType,code:e.componentInfo.script},null,8,["language","code"])])])])):c("",!0),e.componentInfo.rollbackScript!=null?(i(),s("div",he,[ge,t("div",ve,[k(t("input",{type:"text",name:"title","onUpdate:modelValue":o[8]||(o[8]=a=>e.componentInfo.rollbackScriptName=a),class:"layui-input",disabled:""},null,512),[[x,e.componentInfo.rollbackScriptName]])])])):c("",!0),e.componentInfo.rollbackScript!=null?(i(),s("div",ke,[t("div",xe,[t("div",null,[t("div",null,[_(h,{language:e.componentInfo.rollbackScriptType,code:e.componentInfo.rollbackScript},null,8,["language","code"])])])])])):c("",!0),e.customData&&e.customData.flag!=null?(i(),s("h3",Ae,"执行信息")):c("",!0),e.customData.ex?(i(),s("div",Ie,[we,t("div",De,[t("div",null,[_(h,{language:"text",code:e.customData.ex},null,8,["code"])])])])):c("",!0),e.customData&&e.customData.flag!=null?(i(),s("div",Se,[Me,t("div",Ve,[(i(!0),s(N,null,H(e.customData,(a,d)=>(i(),s("div",null,[d!=="ex"&&d!=="flag"?(i(),s("span",Ce,[t("label",{textContent:u(d)},null,8,Ne),y("："),t("label",{textContent:u(a)},null,8,Te),Be])):c("",!0)]))),256))])])):c("",!0)]),_:1},8,["modelValue"])],64)}const Qe=B(G,[["render",je]]);export{Qe as default};
