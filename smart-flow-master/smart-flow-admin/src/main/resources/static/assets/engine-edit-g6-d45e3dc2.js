import{_ as G,q as j,e as w,i as W,E as J,G as Z,I as Q,J as X,x as Y,K as ee,j as te,L as oe,o as y,s as I,n as l,p as u,m as c,l as r,F as z,y as le,t as k,v as B,B as P,M as D,A as h,a as U,z as x,N as L}from"./index-6b451810.js";/* empty css              *//* empty css              *//* empty css              */import{s as ne,g as ie,h as se}from"./api-c953154a.js";import{G as ae}from"./index-de2b558d.js";import{e as H}from"./editor.api-c30b8609.js";import"./toggleHighContrast-59927427.js";import"./monaco.contribution-7418d8b9.js";import"./preload-helper-41c905a7.js";var _,E,V;const de={updated(){this.initEditor(this.componentInfo)},setup:function(){const o=j();let i=-1,R=window.location.href;if(R.split("/").length>1){let e=R.split("/");e.length>0&&!isNaN(parseFloat(e[e.length-1]))&&(i=e[e.length-1])}let $=1;const A=w(!1),O=w(!1),v=w({}),f=w(!1),C=w({}),M=w({}),T=w([]),F=w([]),N=[{title:"名称",width:"80px",key:"name",customSlot:"name"},{title:"值",width:"120px",key:"value",ellipsisTooltip:!0,customSlot:"value"},{title:"操作",width:"60px",key:"opt",customSlot:"opt"}],S={nodes:[],edges:[]};let t;return W(()=>{const e=new ae.Graph({container:"engine_pic",width:window.innerWidth,height:window.innerHeight,fitCenter:!1,groupByTypes:!0,groupType:"combo",modes:{default:["click-select","activate-relations","drag-combo","drag-node",{type:"scroll-canvas",direction:"both",scalableRange:-1},{type:"brush-select",trigger:"drag"},{type:"create-edge",trigger:"click",key:"alt",shouldBegin:function(p,a){if(p.item.getType()!=="node")return!1;const s=p.item.getEdges();let m=0;for(let b=0;b<s.length;b++)s[b].getModel().source===p.item.getModel().id&&m++;const n=p.item.getModel().componentInfo;return n.type==="BASIC"&&m===0||n.type==="IF"&&m<2?!0:n.type==="CHOOSE"},shouldEnd:function(p,a){const s=e.findById(a.source);return!s||!p.item||s.getType()==="combo"||p.item.getType()==="combo"?!1:s.getModel().id!==p.item.getModel().id}}]},defaultEdge:{type:"line",style:{lineWidth:1,stroke:"black",lineAppendWidth:5,endArrow:{path:"M 0,0 L 10,3 L 10,-3 Z",fill:"black",strokeOpacity:.8,fillOpacity:.8}}},defaultNode:{size:[200,50],type:"rect"},defaultCombo:{padding:30,type:"rect",labelCfg:{position:"top"},style:{stroke:"grey",lineDash:10}}});if((async()=>{const p=await ne();F.value=p.data})(),i>0){let p=window.outerWidth*.5-window.outerWidth*.5*.15;(async()=>{const s=await ie(i);for(let m=0;m<s.data.nodes.length;m++){let n=s.data.nodes[m];n.x=p+n.x*300,n.y=n.y*150+40,n.id==="#start"||n.id==="#end"?n.style.fill="rgba(0,204,0,0.5)":n.label=n.title,n.type==="diamond"?(n.size=[200,110],n.componentInfo&&(n.componentInfo.optionTypes=[{name:"IF组件",value:"IF"},{name:"CHOOSE组件",value:"CHOOSE"}])):n.componentInfo&&(n.componentInfo.optionTypes=[{name:"基本组件",value:"BASIC"}]),n.componentInfo&&(n.componentInfo.extensionAttributes?n.componentInfo.enabledExtensionAttributes=!0:n.componentInfo.enabledExtensionAttributes=!1,n.componentInfo.rollbackScript?n.componentInfo.enabledRollbackScriptEdit=!0:n.componentInfo.enabledRollbackScriptEdit=!1),n.componentInfo&&!n.componentInfo.script?(n.componentInfo.subtype="1",n.componentInfo.scriptTypeIndex="javascript",n.componentInfo.rollbackScriptTypeIndex="javascript"):n.componentInfo&&(n.componentInfo.subtype="2",n.componentInfo.scriptTypeIndex=n.componentInfo.scriptType,n.componentInfo.rollbackScriptTypeIndex=n.componentInfo.rollbackScriptType,n.componentInfo.scriptTypeIndex==="js"&&(n.componentInfo.scriptTypeIndex="javascript"),n.componentInfo.rollbackScriptTypeIndex==="js"&&(n.componentInfo.rollbackScriptTypeIndex="javascript"),n.componentInfo.scriptTypeIndex!=="javascript"&&n.componentInfo.scriptTypeIndex!=="groovy"&&n.componentInfo.scriptTypeIndex!=="ognl"&&n.componentInfo.scriptTypeIndex!=="qlexpress"&&(n.componentInfo.scriptTypeIndex="-1"),n.componentInfo.rollbackScriptTypeIndex!=="javascript"&&n.componentInfo.rollbackScriptTypeIndex!=="groovy"&&n.componentInfo.rollbackScriptTypeIndex!=="ognl"&&n.componentInfo.rollbackScriptTypeIndex!=="qlexpress"&&(n.componentInfo.rollbackScriptTypeIndex="-1"))}for(let m=0;m<s.data.combos.length;m++)s.data.combos[m].componentInfo.subtype="1",s.data.combos[m].componentInfo.optionTypes=[{name:"子流程组件",value:"SUBPROCESS"},{name:"适配器",value:"ADAPTER"}];S.edges=s.data.edges,S.combos=s.data.combos,S.nodes=s.data.nodes,M.value={name:s.data.name,process:s.data.process,id:s.data.id},e.data(S),e.render()})()}e.on("node:dblclick",p=>{const a=p.item;let s=a.getModel().componentInfo,m=a.getModel().id;m==="#start"||m==="#end"||(A.value=!A.value,v.value=s,v.value.id=a.getModel().id)}),e.on("combo:dblclick",p=>{const a=p.item;let s=a.getModel().componentInfo;A.value=!A.value,v.value=s,v.value.id=a.getModel().id}),e.on("edge:dblclick",p=>{const a=p.item;let s=a.getModel().label;const m=a.getModel().source;t.findById(m).getModel().type==="diamond"&&(C.value={label:s,edgeId:a.getModel().id,type:a.getModel().type},f.value=!f.value)}),e.on("edge:click",p=>{const a=p.item;e.setItemState(a,"selected",!0)}),i<=-1&&(e.data(S),e.render()),t=e}),window.document.onkeydown=function(e){if(!(O.value||A.value||f.value)){if(e.key==="Backspace"||e.key==="Delete"){const d={opt:"delete",nodes:[],edges:[],combos:[]};let p=!1,a=0;const s=t.findAllByState("edge","selected");for(let g=0;g<s.length;g++)d.edges[a++]=s[g].getModel(),t.removeItem(s[g],!1),p=!0;const m=t.findAllByState("node","selected");for(let g=0;g<m.length;g++){d.nodes[g]=m[g].getModel();const K=m[g].getEdges();for(let q=0;q<K.length;q++)d.edges[a++]=K[q].getModel();t.removeItem(m[g],!1),p=!0}const n=t.findAllByState("combo","selected");for(let g=0;g<n.length;g++)d.combos[g]=n[g].getModel(),t.removeItem(n[g],!1),p=!0;if(!p)return;t.pushStack("delete",d,"undo");const b=t.getRedoStack();if(b==null||b.length===0)return;for(;b.pop(););}else if(!((e.ctrlKey||e.metaKey)&&e.key==="c")){if(!((e.ctrlKey||e.metaKey)&&e.key==="v"))if((e.ctrlKey||e.metaKey)&&e.key==="z"){const d=t.getUndoStack();if(d==null||d.length===0)return;const p=d.pop();if(p){const a=p.data;if(a.opt==="delete"){for(let s=0;s<a.nodes.length;s++)t.addItem("node",a.nodes[s],!1);for(let s=0;s<a.edges.length;s++)t.addItem("edge",a.edges[s],!1);for(let s=0;s<a.combos.length;s++)t.addItem("combo",a.combos[s],!1)}a.opt&&t.pushStack("delete",a,"redo")}}else(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key}}},{componentInfoVisible:A,componentInfo:v,edgeInfo:C,edgeInfoVisible:f,columns2:N,engineInfoVisible:O,engineInfo:M,edingKeys:T,standardAttributes:F,addField(e){const d={name:"-1",value:""};e.attributes.push(d),this.editHandle(d)},removeField(e,d){e.attributes.splice(e.attributes.indexOf(d),1),this.deleteEdit(d)},editHandle(e){T.value.push(e)},deleteEdit(e){const d=T.value.indexOf(e);d<0||T.value.splice(d,1)},changeValue(e,d,p){if(e.name==="-1"){J.notifiy({title:"提示",content:"请选择属性",icon:2});return}d.attributes.forEach(a=>{a===e&&(a.name=e.name,a.value=e.value,this.standardAttributes.forEach(s=>{s.name===e.name&&(a.remark=s.remark)}))}),d.attributes.forEach(a=>{a.name===e.name&&(a.value=e.value)}),this.deleteEdit(e)},checkStandardAttributeDisabled(e,d,p){if(p.name===d)return!1;for(let a=0;a<e.attributes.length;a++)if(e.attributes[a].name===d)return!0;return!1},addNode(){const e=t.getViewPortCenterPoint();t.addItem("node",{id:"anonymous-node-"+$++,label:"Node",componentInfo:{type:"BASIC",subtype:"1",scriptType:"javascript",script:"",rollbackScript:"",rollbackScriptType:"javascript",extensionAttributes:"",attributes:[],optionTypes:[{name:"基本组件",value:"BASIC"}],scriptTypeIndex:"javascript",rollbackScriptTypeIndex:"javascript",enabledRollbackScriptEdit:!1,enabledExtensionAttributes:!1},x:e.x,y:e.y,anchorPoints:[[0,.5],[0,1],[.5,0],[.5,1]]},!0)},addCondition(){const e=t.getViewPortCenterPoint();t.addItem("node",{id:"anonymous-condition-"+$++,type:"diamond",size:[200,100],label:"Condition",componentInfo:{type:"IF",subtype:"1",scriptType:"javascript",script:"",rollbackScript:"",rollbackScriptType:"javascript",extensionAttributes:"",attributes:[],optionTypes:[{name:"IF组件",value:"IF"},{name:"CHOOSE组件",value:"CHOOSE"}],scriptTypeIndex:"javascript",rollbackScriptTypeIndex:"javascript",enabledRollbackScriptEdit:!1,enabledExtensionAttributes:!1},x:e.x,y:e.y,anchorPoints:[[0,.5],[1,.5],[.5,0],[.5,1]]},!0)},addCombo(){const e=t.getViewPortCenterPoint();t.addItem("combo",{id:"anonymous-combo-"+$++,type:"rect",size:[200,100],componentInfo:{type:"SUBPROCESS",extensionAttributes:"",attributes:[],optionTypes:[{name:"子流程组件",value:"SUBPROCESS"},{name:"适配器",value:"ADAPTER"}],enabledRollbackScriptEdit:!1,enabledExtensionAttributes:!1},x:e.x,y:e.y},!0)},exportImg(){t.downloadFullImage("graph","image/png",{})},save(e){const d=t.getNodes(),p=t.getEdges(),a=t.getCombos(),s={name:e.name,process:e.process,id:e.id,nodes:[],edges:[],combos:[]};for(let n=0;n<d.length;n++){s.nodes[n]=d[n].getModel();let b=s.nodes[n].componentInfo;b&&b.subtype==="2"&&(b.describe=b.scriptName),b&&!b.enabledExtensionAttributes&&(b.extensionAttributes=null),b&&!b.enabledRollbackScriptEdit&&(b.rollbackScriptType=null)}for(let n=0;n<p.length;n++)s.edges[n]=p[n].getModel();for(let n=0;n<a.length;n++)s.combos[n]=a[n].getModel();(async()=>{(await se(s)).success&&o.push({path:"/engines"})})()},initEditor(e){_&&(_.dispose(),_=null),E&&(E.dispose(),E=null),V&&(V.dispose(),V=null),!_&&document.getElementById("scriptEditor")&&(_=H.create(document.getElementById("scriptEditor"),{theme:"vs-dark",value:"",language:"js",folding:!0,foldingHighlight:!0,foldingStrategy:"indentation",showFoldingControls:"always",disableLayerHinting:!0,emptySelectionClipboard:!1,selectionClipboard:!1,automaticLayout:!0,codeLens:!1,suggestFontSize:14,fontSize:14,scrollBeyondLastLine:!1,colorDecorators:!0,accessibilitySupport:"off",lineNumbers:"on",lineNumbersMinChars:5,readOnly:!1})),!V&&document.getElementById("extensionAttrEditor")&&(V=H.create(document.getElementById("extensionAttrEditor"),{theme:"vs-dark",value:"",language:"properties",folding:!0,foldingHighlight:!0,foldingStrategy:"indentation",showFoldingControls:"always",disableLayerHinting:!0,emptySelectionClipboard:!1,selectionClipboard:!1,automaticLayout:!0,codeLens:!1,suggestFontSize:14,fontSize:14,scrollBeyondLastLine:!1,colorDecorators:!0,accessibilitySupport:"off",lineNumbers:"on",lineNumbersMinChars:5,readOnly:!1})),document.getElementById("rollbackScriptEditor")&&!E&&(E=H.create(document.getElementById("rollbackScriptEditor"),{theme:"vs-dark",value:"",language:"js",folding:!0,foldingHighlight:!0,foldingStrategy:"indentation",showFoldingControls:"always",disableLayerHinting:!0,emptySelectionClipboard:!1,selectionClipboard:!1,automaticLayout:!0,codeLens:!1,suggestFontSize:14,fontSize:14,scrollBeyondLastLine:!1,colorDecorators:!0,accessibilitySupport:"off",lineNumbers:"on",lineNumbersMinChars:5,readOnly:!1})),_&&e.script&&_.setValue(e.script),E&&e.rollbackScript&&E.setValue(e.rollbackScript),V&&e.extensionAttributes&&V.setValue(e.extensionAttributes)},processComponentInfo(e){if(_&&(e.script=_.getValue()),E&&(e.rollbackScript=E.getValue()),V&&(e.extensionAttributes=V.getValue()),e.scriptTypeIndex!=="-1"&&(e.scriptType=e.scriptTypeIndex),e.rollbackScriptTypeIndex!=="-1"&&(e.rollbackScriptType=e.rollbackScriptTypeIndex),e&&e.name){const d=t.findById(e.id);d.getType()==="combo"?d.getModel().label=(e.type==="SUBPROCESS"?"子流程:":"适配器:")+e.name:d.getType()==="node"&&(e.type==="IF"||e.type==="CHOOSE"?d.getModel().label=e.name:d.getModel().title!==e.name&&(d.getModel().title=e.name,d.getModel().label=e.name)),t.updateItem(d,d.getModel(),!1)}},saveConfirm(){O.value=!O.value},changeLabel(e){const d=e.edgeId,p=e.label,a=e.type,s=t.findById(d);s&&p&&(s.getModel().label=p),s&&a&&(s.getModel().type=a),f.value=!f.value,t.refreshItem(s)}}}},re={id:"tool-bar",style:{height:"50px",display:"flex","justify-content":"space-between","align-items":"center",border:"0 solid #c7bfbf","border-bottom-width":"1px"}},ue=l("div",{id:"engine_pic"},null,-1),pe=l("h2",{style:{"margin-top":"5px","margin-bottom":"5px"}},"基本信息",-1),ce={class:"layui-form-item line-item"},me=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("组件名称")],-1),fe={class:"layui-input-block line-block"},ye={class:"layui-form-item"},be=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("组件类型")],-1),ge={class:"layui-input-block"},ve={key:0,class:"layui-form-item"},Ie=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("组件子类型")],-1),ke={class:"layui-input-block line-block",style:{display:"flex","align-items":"center"}},he=l("label",{for:"id1"},"基本",-1),Se=l("label",{for:"id2"},"脚本",-1),_e={key:1,class:"layui-form-item"},Ee={class:"layui-form-label line-label"},Ve=l("span",{class:"layui-required layui-icon"},"*",-1),Ce=l("i",{class:"layui-icon layui-icon-about",style:{color:"#bea542"}},null,-1),Te={class:"layui-input-block line-block"},we={class:"layui-form-item"},Ae=l("label",{class:"layui-form-label line-label"},"标准属性列表",-1),Me={class:"layui-input-block line-block"},Be={key:1},Ue=l("i",{class:"layui-icon layui-icon-about",style:{color:"#1E9FFF"}},null,-1),Oe={key:1},$e={key:0},Fe=l("i",{class:"layui-icon layui-icon-edit",style:{color:"#bea542"}},null,-1),Ne={key:1},xe=l("i",{class:"layui-icon layui-icon-ok",style:{color:"#bea542"}},null,-1),Le=l("i",{class:"layui-icon layui-icon-delete",style:{color:"#bea542"}},null,-1),Re={style:{display:"flex","justify-content":"center",height:"auto"}},qe={class:"layui-form-item",style:{display:"flex","align-items":"center"}},ze=l("i",{class:"layui-icon layui-icon-about",style:{color:"#bea542"}},null,-1),He={style:{"margin-left":"20px"}},Ke={class:"layui-form-item"},Pe=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("属性内容")],-1),De={class:"layui-input-block line-block"},Ge={id:"extensionAttrEditor",ref:"extensionAttrEditor",class:"layout-edit-line2"},je={key:2,style:{"margin-top":"5px","margin-bottom":"5px"}},We={key:3,class:"layui-form-item"},Je=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("脚本名称")],-1),Ze={class:"layui-input-block line-block"},Qe={key:4,class:"layui-form-item"},Xe=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("脚本类型")],-1),Ye={class:"layui-input-block line-block",style:{display:"flex","align-items":"center"}},et={class:"layui-form-item"},tt=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("脚本内容")],-1),ot={class:"layui-input-block line-block"},lt={id:"scriptEditor",ref:"scriptEditor",class:"layout-edit-line3"},nt={class:"layui-form-item",style:{display:"flex","align-items":"center"}},it=l("i",{class:"layui-icon layui-icon-about",style:{color:"#bea542"}},null,-1),st={class:"layui-input-block",style:{"margin-left":"30px"}},at={key:5,class:"layui-form-item"},dt=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("脚本类型")],-1),rt={class:"layui-input-block line-block",style:{display:"flex","align-items":"center"}},ut={class:"layui-form-item"},pt=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("脚本内容")],-1),ct={class:"layui-input-block line-block"},mt={id:"rollbackScriptEditor",ref:"rollbackScriptEditor",class:"layout-edit-line3"},ft={class:"layui-form-item line-item",style:{"margin-left":"5px",width:"60%","margin-top":"5px"}},yt=l("label",{class:"layui-form-label line-label"},"边信息",-1),bt={class:"layui-input-block line-block"},gt={class:"layui-form-item line-item",style:{"margin-left":"5px",width:"60%"}},vt=l("label",{class:"layui-form-label line-label"},"类型",-1),It={class:"layui-input-block line-block"},kt={class:"layui-form-item line-item",style:{"margin-left":"5px"}},ht={class:"layui-form-item line-item",style:{"margin-left":"5px",width:"80%","margin-top":"2px"}},St=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("引擎名称")],-1),_t={class:"layui-input-block line-block"},Et={class:"layui-form-item line-item",style:{"margin-left":"5px",width:"80%"}},Vt=l("label",{class:"layui-form-label line-label"},[l("span",{class:"layui-required layui-icon"},"*"),u("流水线名称")],-1),Ct={class:"layui-input-block line-block"},Tt={class:"layui-form-item line-item",style:{"margin-left":"5px"}};function wt(o,i,R,$,A,O){const v=Z,f=Q,C=X,M=Y,T=ee,F=te,N=oe,S=le;return y(),I(z,null,[l("div",re,[l("div",null,[u("     "),c(v,{onClick:o.addNode},{default:r(()=>[u("添加节点")]),_:1},8,["onClick"]),c(v,{onClick:o.addCondition},{default:r(()=>[u("添加条件")]),_:1},8,["onClick"])]),l("div",null,[c(v,{onClick:o.exportImg},{default:r(()=>[u("导出图片")]),_:1},8,["onClick"]),c(v,{onClick:o.saveConfirm,style:{"margin-right":"10px"}},{default:r(()=>[u("保存配置")]),_:1},8,["onClick"])])]),ue,c(S,{type:"drawer",modelValue:o.componentInfoVisible,"onUpdate:modelValue":i[21]||(i[21]=t=>o.componentInfoVisible=t),title:"组件信息",area:"40%",onClose:i[22]||(i[22]=t=>o.processComponentInfo(o.componentInfo))},{default:r(()=>[pe,l("div",ce,[me,l("div",fe,[k(l("input",{type:"text",name:"title","onUpdate:modelValue":i[0]||(i[0]=t=>o.componentInfo.name=t),autocomplete:"off",class:"layui-input",style:{width:"50%"}},null,512),[[B,o.componentInfo.name]])])]),l("div",ye,[be,l("div",ge,[c(C,{modelValue:o.componentInfo.type,"onUpdate:modelValue":i[1]||(i[1]=t=>o.componentInfo.type=t),style:{width:"50%"}},{default:r(()=>[(y(!0),I(z,null,P(o.componentInfo.optionTypes,(t,e)=>(y(),U(f,{key:e,value:t.value},{default:r(()=>[u(x(t.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),o.componentInfo.type==="BASIC"||o.componentInfo.type==="IF"||o.componentInfo.type==="CHOOSE"?(y(),I("div",ve,[Ie,l("div",ke,[k(l("input",{type:"radio",id:"id1",name:"subtype",value:"1","onUpdate:modelValue":i[2]||(i[2]=t=>o.componentInfo.subtype=t)},null,512),[[D,o.componentInfo.subtype]]),he,u("     "),k(l("input",{type:"radio",id:"id2",name:"subtype",value:"2","onUpdate:modelValue":i[3]||(i[3]=t=>o.componentInfo.subtype=t)},null,512),[[D,o.componentInfo.subtype]]),Se])])):h("",!0),o.componentInfo.subtype==="1"&&o.componentInfo.type!=="SUBPROCESS"?(y(),I("div",_e,[l("label",Ee,[c(M,{visible:!1,trigger:"hover",content:"填写类名或者spring bean名称",position:"right"},{default:r(()=>[l("div",{onMouseover:i[4]||(i[4]=t=>o.visible=!0),onMouseleave:i[5]||(i[5]=t=>o.visible=!1)},[Ve,u("执行类"),Ce],32)]),_:1})]),l("div",Te,[k(l("input",{type:"text",name:"title","onUpdate:modelValue":i[6]||(i[6]=t=>o.componentInfo.describe=t),autocomplete:"off",class:"layui-input",style:{width:"50%"}},null,512),[[B,o.componentInfo.describe]])])])):h("",!0),l("div",we,[Ae,l("div",Me,[c(F,{columns:o.columns2,"data-source":o.componentInfo.attributes,size:o.md,skin:"line",even:"true",resize:"true",style:{height:"auto"}},{name:r(({data:t})=>[o.edingKeys.includes(t)?(y(),U(C,{key:0,modelValue:t.name,"onUpdate:modelValue":e=>t.name=e},{default:r(()=>[c(f,{value:"-1"},{default:r(()=>[u("请选择属性")]),_:1}),(y(!0),I(z,null,P(o.standardAttributes,(e,d)=>(y(),U(f,{key:d,disabled:o.checkStandardAttributeDisabled(o.componentInfo,e.name,t),value:e.name},{default:r(()=>[u(x(e.name),1)]),_:2},1032,["disabled","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(y(),I("span",Be,[c(M,{visible:!1,trigger:"hover",content:t.remark,position:"right"},{default:r(()=>[l("div",{onMouseover:i[7]||(i[7]=e=>o.visible=!0),onMouseleave:i[8]||(i[8]=e=>o.visible=!1)},[u(x(t.name),1),Ue],32)]),_:2},1032,["content"])]))]),value:r(({data:t})=>[o.edingKeys.includes(t)?(y(),U(T,{key:0,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e},null,8,["modelValue","onUpdate:modelValue"])):(y(),I("span",Oe,x(t.value),1))]),opt:r(({data:t})=>[o.edingKeys.includes(t)?h("",!0):(y(),I("div",$e,[c(v,{onClick:e=>o.editHandle(t)},{default:r(()=>[Fe]),_:2},1032,["onClick"])])),o.edingKeys.includes(t)?(y(),I("div",Ne,[c(v,{onClick:e=>o.changeValue(t,o.componentInfo,1)},{default:r(()=>[xe]),_:2},1032,["onClick"])])):h("",!0),l("div",null,[c(v,{onClick:e=>o.removeField(o.componentInfo,t)},{default:r(()=>[Le]),_:2},1032,["onClick"])])]),footer:r(()=>[l("div",Re,[c(v,{size:"sm",type:"primary",onClick:i[9]||(i[9]=t=>o.addField(o.componentInfo))},{default:r(()=>[u("新增")]),_:1})])]),_:1},8,["columns","data-source","size"])])]),l("div",qe,[c(M,{visible:!1,trigger:"hover",content:"使用此功能请确保相关扩展已经实现",position:"right"},{default:r(()=>[l("div",{onMouseover:i[10]||(i[10]=t=>o.visible=!0),onMouseleave:i[11]||(i[11]=t=>o.visible=!1)},[u(" 扩展属性"),ze],32)]),_:1}),l("div",He,[c(N,{type:"checkbox",name:"switch",skin:"switch",modelValue:o.componentInfo.enabledExtensionAttributes,"onUpdate:modelValue":i[12]||(i[12]=t=>o.componentInfo.enabledExtensionAttributes=t),label:"开启"},null,8,["modelValue"])])]),k(l("div",Ke,[Pe,l("div",De,[l("div",Ge,null,512)])],512),[[L,o.componentInfo.enabledExtensionAttributes]]),o.componentInfo.subtype==="2"?(y(),I("h2",je,"脚本信息")):h("",!0),o.componentInfo.subtype==="2"?(y(),I("div",We,[Je,l("div",Ze,[k(l("input",{type:"text",name:"title","onUpdate:modelValue":i[13]||(i[13]=t=>o.componentInfo.scriptName=t),autocomplete:"off",class:"layui-input",style:{width:"50%"}},null,512),[[B,o.componentInfo.scriptName]])])])):h("",!0),o.componentInfo.subtype==="2"?(y(),I("div",Qe,[Xe,l("div",Ye,[c(C,{modelValue:o.componentInfo.scriptTypeIndex,"onUpdate:modelValue":i[14]||(i[14]=t=>o.componentInfo.scriptTypeIndex=t),showSearch:"true",style:{width:"30%"}},{default:r(()=>[c(f,{value:"ognl"},{default:r(()=>[u("ognl")]),_:1}),c(f,{value:"groovy"},{default:r(()=>[u("groovy")]),_:1}),c(f,{value:"javascript"},{default:r(()=>[u("javascript/js")]),_:1}),c(f,{value:"qlexpress"},{default:r(()=>[u("qlexpress")]),_:1}),c(f,{value:"-1"},{default:r(()=>[u("其他")]),_:1})]),_:1},8,["modelValue"]),u("    "),o.componentInfo.scriptTypeIndex==="-1"?(y(),U(T,{key:0,type:"text",name:"inputScriptType",modelValue:o.componentInfo.scriptType,"onUpdate:modelValue":i[15]||(i[15]=t=>o.componentInfo.scriptType=t),autocomplete:"off",class:"layui-input",style:{width:"50%"}},null,8,["modelValue"])):h("",!0)])])):h("",!0),k(l("div",et,[tt,l("div",ot,[l("div",lt,null,512)])],512),[[L,o.componentInfo.subtype==="2"]]),k(l("div",nt,[c(M,{visible:!1,trigger:"hover",content:"使用此功能请开启rollback属性为true",position:"right"},{default:r(()=>[l("div",{onMouseover:i[16]||(i[16]=t=>o.visible=!0),onMouseleave:i[17]||(i[17]=t=>o.visible=!1)},[u(" 回滚脚本 "),it],32)]),_:1}),l("div",st,[c(N,{name:"switch2",skin:"switch",modelValue:o.componentInfo.enabledRollbackScriptEdit,"onUpdate:modelValue":i[18]||(i[18]=t=>o.componentInfo.enabledRollbackScriptEdit=t),label:"开启"},null,8,["modelValue"])])],512),[[L,o.componentInfo.subtype==="2"&&o.componentInfo.type==="BASIC"]]),o.componentInfo.subtype==="2"&&o.componentInfo.type==="BASIC"&&o.componentInfo.enabledRollbackScriptEdit?(y(),I("div",at,[dt,l("div",rt,[c(C,{modelValue:o.componentInfo.rollbackScriptTypeIndex,"onUpdate:modelValue":i[19]||(i[19]=t=>o.componentInfo.rollbackScriptTypeIndex=t),showSearch:"true",style:{width:"30%"}},{default:r(()=>[c(f,{value:"ognl"},{default:r(()=>[u("ognl")]),_:1}),c(f,{value:"groovy"},{default:r(()=>[u("groovy")]),_:1}),c(f,{value:"javascript"},{default:r(()=>[u("javascript/js")]),_:1}),c(f,{value:"qlexpress"},{default:r(()=>[u("qlexpress")]),_:1}),c(f,{value:"-1"},{default:r(()=>[u("其他")]),_:1})]),_:1},8,["modelValue"]),u("    "),o.componentInfo.rollbackScriptTypeIndex==="-1"?(y(),U(T,{key:0,type:"text",name:"inputRollScriptType",modelValue:o.componentInfo.rollbackScriptType,"onUpdate:modelValue":i[20]||(i[20]=t=>o.componentInfo.rollbackScriptType=t),autocomplete:"off",class:"layui-input",style:{width:"30%"}},null,8,["modelValue"])):h("",!0)])])):h("",!0),k(l("div",ut,[pt,l("div",ct,[l("div",mt,null,512)])],512),[[L,o.componentInfo.subtype==="2"&&o.componentInfo.type==="BASIC"&&o.componentInfo.enabledRollbackScriptEdit]])]),_:1},8,["modelValue"]),c(S,{modelValue:o.edgeInfoVisible,"onUpdate:modelValue":i[26]||(i[26]=t=>o.edgeInfoVisible=t),title:"编辑边",type:"drawer",onClose:i[27]||(i[27]=t=>o.changeLabel(o.edgeInfo)),area:"40%"},{default:r(()=>[l("div",ft,[yt,l("div",bt,[k(l("input",{type:"text",name:"title","onUpdate:modelValue":i[23]||(i[23]=t=>o.edgeInfo.label=t),autocomplete:"off",class:"layui-input"},null,512),[[B,o.edgeInfo.label]])])]),l("div",gt,[vt,l("div",It,[c(C,{modelValue:o.edgeInfo.type,"onUpdate:modelValue":i[24]||(i[24]=t=>o.edgeInfo.type=t)},{default:r(()=>[c(f,{value:"line"},{default:r(()=>[u("直线")]),_:1}),c(f,{value:"polyline"},{default:r(()=>[u("折线")]),_:1})]),_:1},8,["modelValue"])])]),l("div",kt,[c(v,{onClick:i[25]||(i[25]=t=>o.changeLabel(o.edgeInfo))},{default:r(()=>[u("确认")]),_:1})])]),_:1},8,["modelValue"]),c(S,{modelValue:o.engineInfoVisible,"onUpdate:modelValue":i[31]||(i[31]=t=>o.engineInfoVisible=t),title:"保存确认",area:"27%"},{default:r(()=>[l("div",ht,[St,l("div",_t,[k(l("input",{type:"text","onUpdate:modelValue":i[28]||(i[28]=t=>o.engineInfo.name=t),autocomplete:"off",class:"layui-input"},null,512),[[B,o.engineInfo.name]])])]),l("div",Et,[Vt,l("div",Ct,[k(l("input",{type:"text","onUpdate:modelValue":i[29]||(i[29]=t=>o.engineInfo.process=t),autocomplete:"off",class:"layui-input"},null,512),[[B,o.engineInfo.process]])])]),l("div",Tt,[c(v,{onClick:i[30]||(i[30]=t=>o.save(o.engineInfo))},{default:r(()=>[u("确认")]),_:1})])]),_:1},8,["modelValue"])],64)}const Rt=G(de,[["render",wt]]);export{Rt as default};
